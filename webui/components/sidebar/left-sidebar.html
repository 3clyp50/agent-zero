<html>
<head>
  <script type="module">
    import { store } from "/components/app/app-store.js";
  </script>
  <!-- Wrapper composes existing sidebar components -->
</head>
<body>
  <!--Sidebar upper elements-->
  <div class="left-panel-top">
    <x-component path="sidebar/quick-actions.html"></x-component>

    <!-- Tabs container -->
    <x-component path="sidebar/tabs.html"></x-component>

    <!-- Chats List -->
    <div class="config-section" id="chats-section" x-data x-show="$store.chats?.contexts?.length > 0 || true">
      <x-component path="sidebar/chats-list.html"></x-component>
    </div>

    <!-- Tasks List -->
    <div class="config-section" id="tasks-section" x-data style="display: none;">
      <x-component path="sidebar/tasks-list.html"></x-component>
    </div>
  </div>
  <!--Sidebar lower elements-->
  <div class="left-panel-bottom">
    <!-- Preferences -->
    <x-component path="sidebar/preferences/preferences-panel.html"></x-component>
    <!-- Version Info -->
    <div class="version-info" x-data>
      <template x-if="$store.app">
        <span id="a0version" x-text="$store.app.versionLabel"></span>
      </template>
    </div>
  </div>

  <script>
    document.addEventListener('alpine:init', () => {
      const s = Alpine.store('app');
      if (s && typeof s.init === 'function') s.init();
    });
  </script>

  <style>
    .left-panel-top {
      flex: 1;
      display: -webkit-flex;
      display: flex;
      flex-direction: column;
      min-height: 0;
      overflow: hidden;
      margin-top: 3.5rem;
      padding: var(--spacing-md) var(--spacing-md) 0 var(--spacing-md);
    }
    .left-panel-top::-webkit-scrollbar {
      width: 0px;
    }
    .left-panel-top {
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    .left-panel-bottom {
      position: relative;
      flex-shrink: 0;
    }
    /* Ensure non-chat sections don't shrink */
    .config-section:not(#chats-section) {
      flex-shrink: 0;
    }
    /* Chats section container inside sidebar */
    #chats-section {
      display: -webkit-flex;
      display: flex;
      flex-direction: column;
      min-height: 0;
      flex: 1;
      margin-top: 0.5rem;
    }
    /* Version label area */
    .version-info { line-height: 0.8rem; position: relative; margin: 0 var(--spacing-md) 1rem var(--spacing-md); padding-top: 10px; border-top: 1px solid var(--color-border); }
    #a0version { color: var(--color-text); opacity: 0.7; font-size: 0.7rem; user-select: all; }
    @media (max-height: 600px) {
      #chats-section { min-height: 100%; }
      .left-panel-top { overflow-y: auto; -webkit-scroll-behavior: smooth; scroll-behavior: smooth; }
    }
  </style>
</body>
</html>


